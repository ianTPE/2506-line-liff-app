# Ëå∂Ë™ûÊôÇÂÖâ (Tea Time) - LIFF Ëå∂È£≤È†êÁ¥ÑÁ≥ªÁµ±

## üìã Project Overview

**Project Name**: Ëå∂Ë™ûÊôÇÂÖâ (Tea Time) - LIFF Tea Booking System  
**Type**: LINE Front-end Framework (LIFF) Web Application  
**Status**: ‚úÖ Production-Ready MVP  
**Purpose**: Complete tea shop ordering and booking system integrated with LINE ecosystem

This is a sophisticated, production-ready tea ordering application built with modern React stack and deeply integrated with LINE LIFF platform. The system provides seamless user experience for browsing products, managing cart, scheduling pickups, and member management - all within the LINE app environment.

## üèóÔ∏è Technology Stack

### Core Technologies
- **Frontend**: Next.js 15 + React 19 + TypeScript 5
- **Styling**: Tailwind CSS 4 with custom gradients and animations
- **Integration**: LINE LIFF SDK 2.26.1 for seamless LINE ecosystem integration
- **Backend**: Bubble.io API with graceful fallback to mock data
- **Deployment**: Configured for Vercel with optimized build settings

### Architecture Pattern
- **State Management**: React Context + Custom Hooks (no Redux complexity)
- **Data Persistence**: localStorage for cart + LIFF profile integration
- **API Strategy**: Primary Bubble.io endpoint with comprehensive mock data fallback
- **Type Safety**: Complete TypeScript coverage with business domain modeling

## üìÅ Project Structure

```
app/tea-app/                   # üéØ Core application module
‚îú‚îÄ‚îÄ components/               # React components organized by function
‚îÇ   ‚îú‚îÄ‚îÄ pages/               # Four main application pages
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HomePage.tsx         # üè† Product browsing & store selection
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CartPage.tsx         # üõí Shopping cart & checkout
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BookingPage.tsx      # üìÖ Pickup scheduling system
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MemberPage.tsx       # üë§ User profile & loyalty program
‚îÇ   ‚îú‚îÄ‚îÄ AppHeader.tsx            # Application header with store info
‚îÇ   ‚îú‚îÄ‚îÄ NavigationTabs.tsx       # Bottom navigation with badges
‚îÇ   ‚îú‚îÄ‚îÄ ProductModal.tsx         # Product customization modal
‚îÇ   ‚îú‚îÄ‚îÄ LoadingSpinner.tsx       # Loading states
‚îÇ   ‚îî‚îÄ‚îÄ TeaAppMain.tsx           # Main application container
‚îú‚îÄ‚îÄ providers/               # State management layer
‚îÇ   ‚îî‚îÄ‚îÄ TeaAppProvider.tsx       # üß† Central state management with Context
‚îú‚îÄ‚îÄ hooks/                   # Custom React hooks
‚îú‚îÄ‚îÄ utils/                   # Utility functions and helpers
‚îú‚îÄ‚îÄ config/                  # Configuration and mock data
‚îú‚îÄ‚îÄ tests/                   # Browser-based testing utilities
‚îî‚îÄ‚îÄ page.tsx                 # Route entry point

types/tea-app.ts             # üìù Complete TypeScript type definitions
scripts/dev-helper.js        # üõ†Ô∏è Development utilities and helpers
```

## üåü Core Features Implemented

### üè† Product Browsing System
- **Multi-category filtering**: Tea, Coffee, Seasonal, Snacks
- **Store selection**: Real-time queue status and wait times
- **Product cards**: Rich product information with ratings and prep times
- **Search and filtering**: Category-based product discovery

### üõí Intelligent Shopping Cart
- **Smart item merging**: Automatically combines identical products with same customizations
- **Real-time calculations**: Dynamic pricing with member discounts
- **Customization options**: Sweetness, ice level, toppings with full persistence
- **Local persistence**: Cart survives browser sessions via localStorage

### üìÖ Advanced Booking System
- **Dual pickup modes**: Immediate pickup vs scheduled pickup
- **Time slot generation**: 30-minute intervals with availability checking
- **Queue management**: Real-time wait time estimates
- **Store switching**: Multi-location support with individual scheduling

### üë§ Comprehensive Member System
- **Membership tiers**: Bronze/Silver/Gold with progressive benefits
- **Points system**: Automated earning and redemption
- **Digital wallet**: Balance management and transaction history
- **Profile management**: Seamless LINE profile integration

### üîê LIFF Integration Features
- **Automatic authentication**: Zero-friction LINE login
- **Profile synchronization**: Auto-sync display name, picture, user ID
- **Message integration**: Order confirmations sent to LINE chat
- **Native experience**: Feels like part of LINE ecosystem

## üîß Technical Implementation Highlights

### State Management Architecture
```typescript
// Context-based state with TypeScript safety
interface TeaAppContextType {
  // User & Authentication
  user: User | null;
  isLoading: boolean;
  
  // Product & Catalog
  products: Product[];
  selectedCategory: string;
  
  // Shopping Cart
  cartItems: CartItem[];
  cartCount: number;
  cartTotal: number;
  
  // Business Logic Methods
  addToCart: (item: CartItem) => void;
  createOrder: (orderData: Partial<Order>) => Promise<ApiResponse<Order>>;
  loadUserData: () => Promise<void>;
}
```

### API Integration Strategy
- **Primary**: Bubble.io workflow API for production data
- **Fallback**: Comprehensive mock data for development/offline mode
- **Error Handling**: Graceful degradation with user-friendly messages
- **Type Safety**: Complete API response typing with generics

### Performance Optimizations
- **Dynamic imports**: Lazy loading of configuration data to avoid SSR issues
- **Memoized callbacks**: Prevents unnecessary re-renders
- **Local storage optimization**: Efficient cart persistence
- **Component organization**: Modular architecture for better code splitting

## üöÄ Development Environment

### Configuration
```bash
# Environment Variables (.env.local)
NEXT_PUBLIC_LIFF_ID=2007550096-yeRbN9ak
NEXT_PUBLIC_BUBBLE_API_BASE=https://tea-time-app.bubbleapps.io/api/1.1/wf
NEXT_PUBLIC_DEV_MODE=true
```

### Development Commands
```bash
npm run dev           # Start development server with Turbopack
npm run tea:dev       # Alias for development
npm run tea:check     # Environment validation
npm run tea:clean     # Clear cache and reset
npm run tea:info      # Build information
```

### Testing Strategy
- **Browser-based testing**: Comprehensive test suite in `tests/index.js`
- **Component testing**: Individual feature validation
- **API testing**: Mock data verification
- **LIFF testing**: Integration validation tools

## üìä Business Logic & Data Models

### Core Entities
- **User**: LINE profile + membership data + wallet/points
- **Product**: Catalog items with categories, pricing, availability
- **Cart**: Persistent shopping cart with customizations
- **Order**: Complete transaction with pickup scheduling
- **Store**: Multi-location support with queue management

### Member Benefits System
```typescript
const membershipLevels = {
  bronze: { pointsRate: 1, benefits: ['1% points back'] },
  silver: { pointsRate: 1.5, benefits: ['1.5% points', 'Skip queue'] },
  gold: { pointsRate: 2, benefits: ['2% points', 'Weekly free drink', 'VIP support'] }
};
```

## üéØ Ready for Development

### What's Complete ‚úÖ
- Full application architecture and core features
- LIFF integration with auto-login and messaging
- Complete UI/UX with responsive design
- Type-safe API integration with fallback system
- Local development environment ready
- Production deployment configuration

### Quick Development Setup
1. `npm install` - Install dependencies
2. `npm run dev` - Start development server
3. Navigate to `http://localhost:3000/tea-app`
4. Test with LIFF simulator or deploy to test in LINE

### Common Development Tasks
- **Add new features**: Extend existing page components
- **API integration**: Use existing `apiRequest` helper with type safety
- **UI enhancements**: Leverage existing Tailwind design system
- **LIFF features**: Extend existing LIFF integration patterns

## üîç Codebase Navigation Tips

### Key Files to Understand
1. **`TeaAppProvider.tsx`** - Central state management and API logic
2. **`types/tea-app.ts`** - Complete type definitions for business domain
3. **`page.tsx`** - Application entry point and provider setup
4. **`config/index.ts`** - Mock data and configuration

### Architecture Patterns
- **Component composition**: Modular, reusable components
- **Custom hooks**: Business logic abstraction
- **Context providers**: State management without complexity
- **Type-driven development**: TypeScript-first approach

This project demonstrates production-ready React development with LIFF integration, showcasing modern web development practices for LINE ecosystem applications.